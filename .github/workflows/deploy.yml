services:
  web:
    build:
      dockerfile: Dockerfile
      context: .

    env:
      APP_ENV: production
      APP_DEBUG: false
      APP_URL: ${RAILWAY_STATIC_URL}

      DB_CONNECTION: mysql
      DB_HOST: ${MYSQLHOST}
      DB_PORT: ${MYSQLPORT}
      DB_DATABASE: ${MYSQLDATABASE}
      DB_USERNAME: ${MYSQLUSER}
      DB_PASSWORD: ${MYSQLPASSWORD}

      CACHE_DRIVER: file
      SESSION_DRIVER: file
      QUEUE_CONNECTION: sync

    healthcheck:
      path: /
      interval: 10
      timeout: 5
      retries: 3
